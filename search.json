[{"title":"CTF-文件上传漏洞","url":"/2025/06/01/CTF-文件上传漏洞/","content":"文件上传漏洞之前做了CTF的一道题，考察了文件上传，在此复习下文件上传。 文件上传漏洞原因：1.服务器配置不当2.文件上传限制被绕过3.开源编辑器的上传漏洞4.文件解析漏洞导致文件执行5.过滤不严或被绕过 可能存在漏洞的位置：1.图片上传功能 2.头像上传功能 3.文档上传功能 文件上传检测方式：1.客户端JS检测（文件扩展名）2.服务端MIME类型检测（content-type内容）3.服务端目录路径检测（跟path参数相关）4.服务器文件扩展名检测（跟文件extension相关）5.服务端文件内容检测（内容是否合法、是否含有恶意代码） 绕过客户端检测：1.原理：在上传页面里含有专门检测文件上传的JS代码，最常见的则是检测文件类型和扩展名是否合法2.方法：在本地浏览器客户端禁用JS即可3.测试：靶场 绕过服务端检测：1.服务端代码检测三点：MIME类型、文件后缀、文件内容2.常见MIME类型​ 1.HTML、txt、pdf​ 2.Word、png、gif​ 3.MPEG、AVI3.绕过MIME类型检测​ 1.原理：检测图片类型文件上传过程中http包的Content-Type字段的值，从而判断文件是否合法​ 2.方法：用BP截取并修改数据包中文件的Content-type类型来进行绕过 绕过文件后缀检测–黑名单1.后缀大小写绕过（.Php)2.空格绕过（.php ）3.点绕过（.php.）4.::DATA绕过(利用Windows下NTFS文件系统的特性,可在文件后缀名加::DATA绕过5.配合Apache解析漏洞（Apache解析有一个特点：解析从右向左，若为不可识别的则继续从左解析，Apache不解析.rar和.owf。）6..htaccess文件 1.配合名单列表绕过，上传一个自定义的.htaccess，就可绕过各种检测 2…htaccess文件（分布式配置文件）提供了针对目录改变配置的方法。 绕过文件后缀检测–白名单1.绕过方法：服务端判断文件类型是从后往前判断，而解析则是与判断相反，可用00截断的方式绕过，%00与0x00截断2.系统在对文文件名读取时，若遇到0x00,则认为读取结束。 绕过文件内容检测1.通过检测文件幻数来判断：通常，通过判断文件前10个字节，即可判断文件的真实类型。 1.绕过jpg类型的文件幻数检测要在文件开头写Value&#x3D;FF D8 FF E0 00 10 4A 49 46 2.绕过gif类型的文件幻数检测则要加Value&#x3D;47 49 46 38 39 61 3.绕过png的，则要加Value&#x3D;89 50 4E 472.通过检测文件加载：一般是调用API或函数进行文件加载测试，常见的则是图像渲染测试，那我们对渲染&#x2F;加载 测试的攻击方式时代码注入绕过，对二次渲染的则是攻击文件加载器自身。 总结：我们可以用溢出攻击对文件加载器进行攻击，上传自己的恶意代码后，服务器上的文件加载器会主动进行加载测试，加载测试时被溢出攻击执行shellcode。","date":"2025-06-01","tags":["CTF基础知识"]},{"title":"Db8Gr的blog01","url":"/2025/06/01/Db8Gr的blog01/","content":"重启后的第一篇文章…现在是2025-6-1的凌晨一点，(￣▽￣)”确实，是时候重新审视自己了，唉…","date":"2025-06-01","tags":["随笔"]},{"title":"第一次blog的Hello World(留作纪念~~)","url":"/2024/10/13/hello-world/","content":"第一篇文章，来扯一下淡…这是我的第一篇文章，请大家多多支持我！ 初衷其实，在我读高中时，学习编程、翻看别的大佬的blog的时候，就已经萌生了自己写blog的想法。奈何…懂的都懂，要考高考，所以呢，计划搁置了很久。终于考完高考，我也能尽情遨游在编程、CS的海洋中了。 小小的实现现在是在读大一，看到有大二的CTF学长搭建了自己的blog，于是…手痒啊！就这样，degu8ger的blog诞生了！最初，觉得搭建blog要从零开始完全自己手搓一个出来，但是如今看来，技术飞速发展，都有现成的框架、demo了，只需引用一下即可。所以，事不宜迟，我选用了Hexo，大概断断续续地捣鼓了有三天吧，一个简陋的demo版出现了！！后续还得自己购置服务器(bushi)或者租一台，弄个域名…现在大一只看到经费在燃烧哇。其实呢，看到自己把别的佬的resources学到并记录在互联网这样一个大家庭中，也算是一种对自己努力学习的见证吧！ 感触之前遇到CS上的一些问题，在互联网上搜索，看到好的、精妙绝伦的就会点击收藏在收藏夹中。时间久了，收藏夹已经满了，而自己没有把他们分门别类的分好，便于自己以后查找。这也是我下定决心搭建blog的其中一个原因吧！特别是最近在疯狂肝CTF，在网上查找了a deluge of 信息，看到大佬的blog做得精彩绝伦、赏心悦目，自己已然心动。出于对技术的渴望也是对自己近一段时间以来获取信息的掌握度，搭建自己的blog也是对自己成长的见证。搭建blog，既是对自己在编程、学CS上的一点点见证，同时也可以锻炼自己的代码能力，包括后期维护啥的。将来工作时也可以呢…欸，不能明说。任何时候起步都不晚，重要的是起步了，就一切都好说。","date":"2024-10-13","tags":["随笔"]},{"title":"about","url":"/about/index.html","content":"某喜欢摸鱼的非正经CTFer,大一在读，马上大二，没事儿刷刷美剧，心血来潮时…爱好健身、跑步(应该不冲突叭)…","date":"2025-06-01"},{"title":"categories","url":"/categories/index.html","content":"","date":"2025-06-01"},{"title":"search","url":"/search/index.html","content":"","date":"2025-06-01"},{"title":"tags","url":"/tags/index.html","content":"","date":"2025-06-01"}]